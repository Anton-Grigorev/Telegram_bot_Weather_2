# –¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç "–ü–æ–≥–æ–¥–∞"_2
import telebot                                                      # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è telebot –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏ –≤ Telegram.
import requests                                                     # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è requests –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
import json                                                         # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è json –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON-–¥–∞–Ω–Ω—ã–º–∏.
from telebot import types                                           # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è types –∏–∑ telebot –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞.

bot = telebot.TeleBot(token='YOUR TOKEN')                           # –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º.
API_OpenWeather = 'YOUR API'                                        # API-–∫–ª—é—á –¥–ª—è OpenWeatherMap (https://openweathermap.org/)
temp = None                                                         # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
feels_like = None                                                   # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—â—É—â–∞–µ–º–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
temp_min = None                                                     # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
temp_max = None                                                     # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
pressure = None                                                     # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–≤–ª–µ–Ω–∏—è.
humidity = None                                                     # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–ª–∞–∂–Ω–æ—Å—Ç–∏.
visibility = None                                                   # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏.
description = None                                                  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–≥–æ–¥—ã.

@bot.message_handler(commands=['start'])                            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã '/start'.
def start(message):                                                 # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
    bot.send_message(message.chat.id, f'–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name} {message.from_user.last_name}! ü§ù\n'
                                      f'–ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ')

@bot.message_handler(content_types=['text'])                        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
def get_city(message):
    city = message.text.strip().lower()                             # –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –µ–≥–æ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É.
    global temp, feels_like, temp_min, temp_max, pressure, humidity, visibility, description  # –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ.
    response = requests.get(                                        # –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API OpenWeatherMap –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞.
        f'https://api.openweathermap.org/data/2.5/weather?q={city}&appid={API_OpenWeather}&units=metric&lang=ru')

    if response.status_code == 200:                                 # –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω (—Å—Ç–∞—Ç—É—Å –∫–æ–¥ 200):
        data = json.loads(response.content)                         # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç JSON.

        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON-–æ—Ç–≤–µ—Ç–∞.
        temp = data['main']['temp']
        feels_like = data['main']['feels_like']
        temp_min = data['main']['temp_min']
        temp_max = data['main']['temp_max']
        pressure = data['main']['pressure']
        humidity = data['main']['humidity']
        visibility = data['visibility']
        description = data['weather'][0]['description']

        # –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –≤—ã–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ.
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton('–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ üå°', callback_data='temperature'))
        markup.add(types.InlineKeyboardButton('–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã üå°', callback_data='feels_like'))
        markup.add(types.InlineKeyboardButton('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚ÜòÔ∏è', callback_data='temp_min'))
        markup.add(types.InlineKeyboardButton('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚¨ÜÔ∏è', callback_data='temp_max'))
        markup.add(types.InlineKeyboardButton('–î–∞–≤–ª–µ–Ω–∏–µ üî¥', callback_data='pressure'))
        markup.add(types.InlineKeyboardButton('–í–ª–∞–∂–Ω–æ—Å—Ç—å üíß', callback_data='humidity'))
        markup.add(types.InlineKeyboardButton('–í–∏–¥–∏–º–æ—Å—Ç—å üî≠', callback_data='visibility'))
        markup.add(types.InlineKeyboardButton('–°–æ—Å—Ç–æ—è–Ω–∏–µ ‚òÄÔ∏è', callback_data='description'))

        bot.send_message(message.chat.id, '–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ:', reply_markup=markup)  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –≤—ã–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ.

    else:                                                               # –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É—Å–ø–µ—à–µ–Ω:
        bot.reply_to(message, f'–ù–µ–≤–µ—Ä–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ - {city} üôà')  # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–≤–µ—Ä–Ω–æ–º –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –≥–æ—Ä–æ–¥–∞.

def emoji(description):
    if description == '–ø–∞—Å–º—É—Ä–Ω–æ':                                       # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '–ø–∞—Å–º—É—Ä–Ω–æ':
        return '‚õÖÔ∏è'                                                     # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏.
    if description == '–æ–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏':                         # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '–æ–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏':
        return 'üå§Ô∏è'                                                     # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏.
    if description == '–Ω–µ–±–æ–ª—å—à–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å':                           # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '–Ω–µ–±–æ–ª—å—à–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å':
        return 'üå§Ô∏è'                                                     # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏.
    if description == '—è—Å–Ω–æ':                                           # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '—è—Å–Ω–æ':
        return '‚òÄÔ∏èÔ∏è'                                                     # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏.
    if description == '–Ω–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å':                                # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '–Ω–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å':
        return 'üåß'                                                      # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏
    if description == '–¥–æ–∂–¥—å':                                          # –ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã - '–¥–æ–∂–¥—å':
        return 'üåß'                                                      # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏

@bot.callback_query_handler(func=lambda call: True)                     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–ª–±—ç–∫-–∑–∞–ø—Ä–æ—Å–æ–≤.
def show_callback(call):
    if call.data == 'temperature':                                      # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞':
        bot.send_message(call.message.chat.id, f'–°–µ–π—á–∞—Å –ø–æ–≥–æ–¥–∞: {temp} –≥—Ä–∞–¥—É—Å(–∞)–æ–≤')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–µ–∫—É—â–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π.
    elif call.data == 'feels_like':                                     # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã':
        bot.send_message(call.message.chat.id, f'–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫: {feels_like} –≥—Ä–∞–¥—É—Å(–∞)–æ–≤')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ—â—É—â–∞–µ–º–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π.
    elif call.data == 'temp_min':                                       # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞':
        bot.send_message(call.message.chat.id, f'–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {temp_min} –≥—Ä–∞–¥—É—Å(–∞)–æ–≤')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π.
    elif call.data == 'temp_max':                                       # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞':
        bot.send_message(call.message.chat.id, f'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {temp_max} –≥—Ä–∞–¥—É—Å(–∞)–æ–≤')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π.
    elif call.data == 'pressure':                                       # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–î–∞–≤–ª–µ–Ω–∏–µ':
        bot.send_message(call.message.chat.id, f'–î–∞–≤–ª–µ–Ω–∏–µ: {pressure} —Ä—Ç—É—Ç–Ω–æ–≥–æ —Å—Ç–æ–ª–±–∞')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –¥–∞–≤–ª–µ–Ω–∏–∏.
    elif call.data == 'humidity':                                       # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–í–ª–∞–∂–Ω–æ—Å—Ç—å':
        bot.send_message(call.message.chat.id, f'–í–ª–∞–∂–Ω–æ—Å—Ç—å: {humidity}')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏.
    elif call.data == 'visibility':                                     # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–í–∏–¥–∏–º–æ—Å—Ç—å':
        bot.send_message(call.message.chat.id, f'–í–∏–¥–∏–º–æ—Å—Ç—å: {visibility} –º–µ—Ç—Ä–æ–≤')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤–∏–¥–∏–º–æ—Å—Ç–∏.
    elif call.data == 'description':                                    # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è '–°–æ—Å—Ç–æ—è–Ω–∏–µ':
        bot.send_message(call.message.chat.id, f'–°–æ—Å—Ç–æ—è–Ω–∏–µ: {description} {emoji(description)}')  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–≥–æ–¥—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —ç–º–æ–¥–∑–∏.

bot.polling(none_stop=True)                                             # –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞.
